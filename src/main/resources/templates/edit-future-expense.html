<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактировать расход</title>
    <link rel="stylesheet" href="/css/style.css?v=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
<div th:replace="~{fragments :: header('Редактировать расход')}"></div>

<main>
    <!-- Форма для редактирования -->
    <div id="future-expense-form">
        <form th:action="@{/update-future-expense}" method="post">
            <input type="hidden" name="id" th:value="${expense.id}"/>
            <h3 class="form-title">Редактировать расход</h3>
            <div class="form-row full-width">
                <label>Название:</label>
                <input type="text" name="title" th:value="${expense.title}" required placeholder="Введите название"/>
            </div>
            <div class="form-row">
                <label>Категория:</label>
                <select name="category" required>
                    <option value="food" th:selected="${expense.category == 'food'}">Еда</option>
                    <option value="housing" th:selected="${expense.category == 'housing'}">Жилье</option>
                    <option value="entertainment" th:selected="${expense.category == 'entertainment'}">Развлечения</option>
                    <option value="children" th:selected="${expense.category == 'children'}">Дети</option>
                    <option value="car" th:selected="${expense.category == 'car'}">Машина</option>
                    <option value="clothing" th:selected="${expense.category == 'clothing'}">Вещи</option>
                    <option value="other" th:selected="${expense.category == 'other'}">Другое</option>
                </select>
            </div>
            <div class="form-row">
                <div class="radio-group">
                    <label><input type="radio" name="urgency" value="urgent" th:checked="${expense.urgency == 'urgent'}" required> Срочно</label>
                    <label><input type="radio" name="urgency" value="not_urgent" th:checked="${expense.urgency == 'not_urgent'}"> Не срочно</label>
                </div>
            </div>
            <div class="form-row">
                <div class="radio-group">
                    <label><input type="radio" name="importance" value="important" th:checked="${expense.importance == 'important'}" required> Важно</label>
                    <label><input type="radio" name="importance" value="not_important" th:checked="${expense.importance == 'not_important'}"> Не важно</label>
                </div>
            </div>
            <div class="form-row">
                <label>
                    <input type="checkbox" id="recurring-checkbox" name="isRecurring" th:checked="${expense.recurring}"/>
                    Повторяющийся платеж
                </label>
                <div id="frequency-section" th:class="${expense.recurring} ? 'frequency-visible' : 'frequency-hidden'">
                    <select name="frequency" id="frequency-select" th:disabled="${!expense.recurring}">
                        <option value="weekly" th:selected="${expense.frequency == 'weekly'}">Еженедельно</option>
                        <option value="monthly" th:selected="${expense.frequency == 'monthly'}">Ежемесячно</option>
                        <option value="bimonthly" th:selected="${expense.frequency == 'bimonthly'}">Раз в 2 месяца</option>
                        <option value="quarterly" th:selected="${expense.frequency == 'quarterly'}">Ежеквартально</option>
                        <option value="yearly" th:selected="${expense.frequency == 'yearly'}">Ежегодно</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="cost-section">
                    <label>Ориентировочная стоимость:</label>
                    <input type="number" name="estimatedCost" step="0.01" th:value="${expense.estimatedCost}" required/>
                    <span class="currency">BYN</span>
                </div>
            </div>
            <div class="form-buttons">
                <button type="submit">Сохранить</button>
                <button type="button" id="cancel-button">Отмена</button>
            </div>
        </form>
    </div>
</main>

<div th:replace="~{fragments :: footer}"></div>

<script src="/js/main.js"></script>
</body>
</html>